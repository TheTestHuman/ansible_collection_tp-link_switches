---
# =============================================================================
# Default-Konfiguration: TP-Link SG3210
# =============================================================================
# Diese Konfiguration wird bei VLAN/LAG/Port-Security Konfiguration mit 
# Option "default" verwendet.
#
# Port-Layout (10 Ports):
#   Port 1: Uplink/Trunk (tagged für alle VLANs)
#   Port 2: Management (untagged VLAN 10)
#   Port 3-8: Clients (untagged VLAN 20)
#   Port 9-10: LAG 1 (Uplink-Redundanz)
#
# =============================================================================

# -----------------------------------------------------------------------------
# VLAN-Konfiguration
# -----------------------------------------------------------------------------
# WICHTIG: Das SG3210-Modul erwartet:
#   - vlan_id (nicht id)
#   - tagged_ports: Liste von Portnummern
#   - untagged_ports: Liste von Portnummern
# -----------------------------------------------------------------------------
vlans:
  - vlan_id: 1
    name: "default"
    tagged_ports: [1]
    untagged_ports: [9, 10]
  
  - vlan_id: 10
    name: "Management"
    tagged_ports: [1]
    untagged_ports: [2, 3]
  
  - vlan_id: 22
    name: "default_test"
    tagged_ports: [1]
    untagged_ports: [3, 4, 5, 6, 7, 8]

# -----------------------------------------------------------------------------
# LAG-Konfiguration (Link Aggregation Groups)
# -----------------------------------------------------------------------------
# Struktur:
#   - lag_id: 1-8
#   - ports: Liste von mindestens 2 Ports
#   - lacp_mode: active | passive | on (static)
#   - description: Optionale Beschreibung
# -----------------------------------------------------------------------------
lag:
  - lag_id: 1
    ports: [9, 10]
    lacp_mode: active
    description: "Uplink-Redundanz"

# -----------------------------------------------------------------------------
# Port-Security Konfiguration
# -----------------------------------------------------------------------------
# Struktur:
#   - port: Port-Nummer (1-10)
#   - max_mac_count: Maximale MAC-Adressen (0-64)
#   - mode: dynamic | static | permanent
#   - status: forward | drop | disable
#   - exceed_notification: true | false
#   - description: Optionale Beschreibung
#
# Modi:
#   - dynamic:   MACs werden gelernt, bei Reboot gelöscht
#   - static:    MACs manuell konfiguriert
#   - permanent: MACs werden gelernt und dauerhaft gespeichert
#
# Status (Violation Action):
#   - forward:  Frames weiterleiten (nur logging)
#   - drop:     Frames verwerfen
#   - disable:  Port deaktivieren
#
# HINWEIS: Ports die hier NICHT gelistet sind, können mit reset_others=yes
#          auf Default zurückgesetzt werden.
# -----------------------------------------------------------------------------
port_security:
  - port: 2
    max_mac_count: 1
    mode: permanent
    status: drop
    exceed_notification: true
    description: "Management - strikt"
  
  - port: 4
    max_mac_count: 3
    mode: "dynamic"
    status: "forward"
    exceed_notification: true
    description: "Client"
  
  # Ports 1, 9, 10: Keine Port-Security (Uplink/LAG)

# -----------------------------------------------------------------------------
# Port-Beschreibungen (für Dokumentation)
# -----------------------------------------------------------------------------
port_descriptions:
  1: "Uplink/Trunk"
  2: "Management"
  3: "Client"
  4: "Client"
  5: "Client"
  6: "Client"
  7: "Client"
  8: "Client"
  9: "LAG1 - Uplink"
  10: "LAG1 - Uplink"
